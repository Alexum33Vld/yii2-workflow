<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        <link href="./assets/ca9878b0/css/bootstrap.css" rel="stylesheet">
<link href="./assets/e4a78afa/style.css" rel="stylesheet">
<script src="./assets/dac0333d/jquery.js"></script>
<script src="./assets/ca9878b0/js/bootstrap.js"></script>
<script src="./assets/23719cdf/jssearch.js"></script>    <title>Installing yii2-workflow - Introduction - Yii2-Workflow Guide</title>
</head>
<body>

<div class="wrap">
    <nav id="w28" class="navbar-inverse navbar-fixed-top navbar" role="navigation"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w28-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./index.html">Yii2-Workflow Guide</a></div><div id="w28-collapse" class="collapse navbar-collapse"><ul id="w29" class="navbar-nav nav"><li><a href="./index.html">Class reference</a></li>
<li><a href="./guide-README.html">Guide</a></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item active" href="#navigation-24" data-toggle="collapse" data-parent="#navigation">Introduction <b class="caret"></b></a><div id="navigation-24" class="submenu panel-collapse collapse in"><a class="list-group-item" href="./guide-intro-workflow.html">About Workflows</a>
<a class="list-group-item active" href="./guide-intro-installation.html">Installing yii2-workflow</a></div>
<a class="list-group-item" href="#navigation-25" data-toggle="collapse" data-parent="#navigation">Key Concepts <b class="caret"></b></a><div id="navigation-25" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-concept-overview.html">Overview</a>
<a class="list-group-item" href="./guide-concept-source.html">Workflow Source</a>
<a class="list-group-item" href="./guide-concept-events.html">Workflow Events</a>
<a class="list-group-item" href="./guide-concept-validation.html">Workflow Driven Attribute Validation</a></div>
<a class="list-group-item" href="#navigation-26" data-toggle="collapse" data-parent="#navigation">Workflow Components <b class="caret"></b></a><div id="navigation-26" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-workflow-behavior.html">Behavior</a>
<a class="list-group-item" href="./guide-source-file.html">File Source</a></div>
<a class="list-group-item" href="#navigation-27" data-toggle="collapse" data-parent="#navigation">Special topics <b class="caret"></b></a><div id="navigation-27" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-special-cookbook.html">Cookbook</a></div></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h1>Installing yii2-workflow <a href="#installing-yii2-workflow" id="installing-yii2-workflow" class="hashlink">&para;</a></h1><p>The preferred way to install this extension is through <a href="http://getcomposer.org/download/">composer</a>.</p>
<p>Either run</p>
<pre><code>php composer.phar require --prefer-dist raoul2000/yii2-workflow "*"
</code></pre>
<p>or add</p>
<pre><code>"raoul2000/yii2-workflow": "*"
</code></pre>
<p>to the require section of your <code>composer.json</code> file.</p>
<h2>Upgrading From <em>SimpleWorkflow</em> 1.x <a href="#upgrading-from-simpleworkflow-1x" id="upgrading-from-simpleworkflow-1x" class="hashlink">&para;</a></h2><p>If you have been using the <a href="http://s172418307.onlinehome.fr/project/sandbox/www/index.php?r=simpleWorkflow/page&amp;view=home">previous version of <em>SimpleWorkflow</em></a> 
together with Yii 1.x and now want to migrate to Yii2, this chapter is for you. We will focus on the main differences between the
previous version of <em>SimpleWorkflow</em> (v1.x) and this one (v2.x).</p>
<p>Main improvements in v2.x aimed to clearly separate the workflow definition in terms of status and transition, from the business logic
that implements the way a model is going to behave inside a workflow. By doing so, the same workflow can be easily used by models of different
types, each one having its own behavior.  </p>
<p>Another goal was to provide maximum flexibility in the way the developer is going to setup its app architecture. For instance the workflow definition
can be embeded in any PHP class that implements the appropriate interface (<code>raoul2000\workflow\source\file\IWorkflowDefinitionProvider</code>). Moreover almost
all classes can be overloaded and new ones created to implements specific needs not covered by the current version. </p>
<h3>Principles <a href="#principles" id="principles" class="hashlink">&para;</a></h3><p>Not that much to say here, as there is no change in the way the <em>SimpleWorkflowBehavior</em> detects status changes :</p>
<ul>
<li>On one side an ActiveRecord's attribute which can be viewed as the future status. </li>
<li>On the other side, the actual status managed internally by the behavior.</li>
</ul>
<p>A transition is a directed link between to statuses : the <em>start</em> and the <em>end</em> status.  </p>
<h3>Definition <a href="#definition" id="definition" class="hashlink">&para;</a></h3><p>The workflow definition required by the <a href="./raoul2000-workflow-source-file-workflowfilesource.html">WorkflowFileSource</a> component differs from previous version : </p>
<ul>
<li>key <code>initial</code> is replaced by <code>initialStatusId</code></li>
<li>key <code>node</code> is replaced by <code>status</code></li>
<li>status ids are stored as keys of the <em>status</em> array (and not as value of the <code>id</code> key anymore)</li>
</ul>
<p>For more information please refer to <a href="guide-source-file.html">Workflow File Source Component</a> documentation. </p>
<h3>Workflow Tasks <a href="#workflow-tasks" id="workflow-tasks" class="hashlink">&para;</a></h3><h4>Declaration <a href="#declaration" id="declaration" class="hashlink">&para;</a></h4><p>Workflow Tasks are not declared anymore in the workflow definition itself. This could create a dependency between the workflow and the 
model, lie for instance when the workflow tasks was using <em>$this</em>. </p>
<h4>Implementation <a href="#implementation" id="implementation" class="hashlink">&para;</a></h4><p>Workflow task used to be a piece of PHP code associated with a workflow transition and evaluated when this transition was performed.
With this new version, <strong>Workflow Tasks should be implemented as event handler attached to a <em>after</em> event type</strong>. </p>
<p>Please refer to the <a href="guide-concept-events.html">Workflow Event</a> documentation for more.</p>
<h3>Status Constraints <a href="#status-constraints" id="status-constraints" class="hashlink">&para;</a></h3><h4>Declaration <a href="#declaration" id="declaration" class="hashlink">&para;</a></h4><p>Status Constraints are not declared anymore in the workflow definition itself, for the same reason as above.</p>
<h4>Implementation <a href="#implementation" id="implementation" class="hashlink">&para;</a></h4><p>Status Constraints used to be a piece of PHP code associated with a status and evaluated as a logical expression <em>before</em> a model enters 
into this status. If the evaluation returned TRUE, the model can access the status, otherwise the transition is blocked.</p>
<p>The same principles still applies but in v2.x <strong>status constraints should be implemented as event handler attached to a <em>before</em> event type.</strong></p>
<p>Please refer to the <a href="guide-concept-events.html">Workflow Event</a> documentation for more.</p>
<h3>Workflow Driven Validation <a href="#workflow-driven-validation" id="workflow-driven-validation" class="hashlink">&para;</a></h3><p>It is still possible to validate models attributes based on the transition that is done by the model. The principle remains the same : 
Workflow driven validation is based on dynamic scenario names and their associated validation rules declared in the model.</p>
<p>Please refer to the <a href="guide-concept-validation.html">Workflow Driven Attribute Validation</a> documentation for more.</p>
<h3>Events <a href="#events" id="events" class="hashlink">&para;</a></h3><p>There are no major changes in the way workflow events are managed although the event model has been enhanced to provide more control
through event handlers.</p>
<p>Please refer to the <a href="guide-concept-events.html">Workflow Event</a> documentation for more.</p>
        <div class="toplink"><a href="#" class="h1" title="go to top"><span class="glyphicon glyphicon-arrow-up"></a></div>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Sat, 31 Oct 2015 20:41:43 +0000</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script type="text/javascript">jQuery(document).ready(function () {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) shiftWindow();
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>
